# Developing on ECL webcomponents

## Software requirements

- Node.js = 14
- yarn >= 1.10.1

## How to start?

Cloning the repository from [github](https://github.com/planctus/ecl-webcomponents)

```bash
git clone git@github.com:planctus/ecl-webcomponents.git
```

Then running yarn in the folder where the repository was cloned into.

```bash
yarn
```

To run stencil.js that will compile the components and the documentation:

```bash
yarn start
```

In a different shell you can then start storybook:

```bash
yarn dev
```

## Generate the file system for a new component

```bash
yarn generate ecl-{component}
yarn generate:template ecl-{component}
```

## Defining tests

Stencil.js uses jest and since we are familiar with it we do use the tests generated by stencil but we modify the test in order to produce a screenshot and check the rendered markup against that, as it happens in ECL.
We currently define only what stencil.js defines as a spec test, so when generating the new component with `yarn generate` you can disable the other test file and the scss file as well.
The test is defined in the test folder inside the component root and it's named `ecl-{component}.spec.tsx`, it is a very basic file that renders the custom-elements and stores a file in the `__snapshosts__` folder if not present or checks the rendered markup against it.

## Run tests on the component

```bash
yarn test ecl-{component}
```

## Linting files

```bash
yarn lint
```

This will run linters on css and js files separately.
Stylelint is used for scss, eslint for js files, configuration files for these two libas are in the root of the project.

## Tool used to compile js, scss and copy files

ECL webcomponents uses the `@ecl/builder` package, which is capable of compiling sass, bundling js, copy files around.
Please refer to the documentation of the package for details on how to setup the tool, it's easy to understand by looking at existing `ecl-builder.config.js` files in the root of each component, the operations are pretty standard.
